---
title: "Directing Change: Qualitative analysis (Summer 25')"
author: "Abiraahmi Shankar"
format:
  html:
    toc-title: Table of Contents
    toc: true
    toc-depth: 5
    toc-floating: true
    cap-location: top
    page-layout: full
    embed-resources: true
    self-contained-math: true
    self-contained: true
    code-fold: true
    smooth-scroll: true
    link-external-icon: true
    css: styles.css
execute:
  echo: false
---

```{css}
table.dataTable tbody td {
  white-space: normal !important;
  word-break: break-word !important;
  overflow-wrap: break-word !important;
  max-width: 400px;
}
table.dataTable thead th {
  white-space: normal !important;
  max-width: 400px;
}
```

As we code interview data, this dashboard will help us:

-   Track analysis progress & saturation

-   Review our codebook

-   View excerpts from transcripts & filter by code, priority and hetergeneity

-   Document team discussions and key decision made during the process

```{r}
#| echo: false
#| include: false

# Load packages
library(tidyverse)
library(dplyr)
library(knitr)
library(readxl)
library(ggplot2)
library(extrafont)
library(htmltools)
library(kableExtra)
library(wordcloud2)
library(tidytext)
library(htmlwidgets)
library(openxlsx)
library(DT)
library(colorspace)
library(plotly)
```


# Saturation tracker

```{r}
#| echo: false
#| include: false

### SWAP Dedoose file path!

# Define ordered coder preference
preferred_coders <- c("abiraahmishankar", "safaltashukla", "ritvikkammend", "leaburgos", "lilian", "colin")

# Load data
excerpts <- read_xlsx(here::here("inst", "data", "test_data.xlsx"),  col_types = "text") %>% 
select(-c(`Excerpt Range`,	`Excerpt Date`, `Resource Creator`,	`Resource Date`)) %>% # Drop columns you don't need
  select(-ends_with("Range"), -ends_with("Weight")) %>% 
  # Filter so that for each transcript, we only keep one coder, in order of preferences ranked above (based on reliability scores)
  mutate(coder_rank = match(`Excerpt Creator`, preferred_coders)) %>%
  filter(!is.na(coder_rank)) %>%
  group_by(`Media Title`) %>%
  filter(coder_rank == min(coder_rank)) %>%
  ungroup() %>%
  select(-coder_rank)


# Step 1: Identify excerpts with Priority or Heterogeneity applied
priority_excerpts <- excerpts %>%
  filter(`Code: Priority excerpt Applied` == "True") %>%
  pull(`Excerpt Copy`)

hetero_excerpts <- excerpts %>%
  filter(`Code: Heterogeniety Applied` == "True") %>%
  pull(`Excerpt Copy`)

# Step 2: Identify all code columns (excluding excerpt and subcodes)
code_columns <- grep("^Code: ", colnames(excerpts), value = TRUE)
code_columns <- setdiff(code_columns, c("Code: Priority excerpt Applied", "Code: Heterogeniety Applied"))

# Step 3: Convert to long format and count occurrences separately
long_codes <- excerpts %>%
  select(`Excerpt Copy`, all_of(code_columns)) %>%
  pivot_longer(cols = all_of(code_columns), names_to = "Code", values_to = "Applied") %>%
  filter(Applied == "True") %>%
  mutate(
    Priority_Applied = ifelse(`Excerpt Copy` %in% priority_excerpts, 1, 0),
    Heterogeneity_Applied = ifelse(`Excerpt Copy` %in% hetero_excerpts, 1, 0)
  ) %>%
  group_by(Code) %>%
  summarise(
    Priority_Count = sum(Priority_Applied),
    Heterogeneity_Count = sum(Heterogeneity_Applied),
    .groups = "drop"
  ) %>%
  arrange(desc(Priority_Count), desc(Heterogeneity_Count)) %>%
  mutate(Code = str_replace(Code, "^Code:", "")) %>% # Remove "Code:" only from the start
  mutate(Code = str_replace(Code, " Applied$", "")) %>%  # Remove "Applied" from the end if it exists
 mutate(Code = str_replace(Code, "\\\\", "\\\\\\\\"))  # Escape backslashes properly
  
```

## All codes applied

The table and chart that follows summarizes all codes that have been applied so far to **completed** transcripts while flagging the priority and heterogeneity counts.


If a code is appearing in the table below, it has been applied but sans the priority or heterogeneity codes

```{r}
# Display table with kable
kable(long_codes, caption = "Counts of Codes Co-Applied with Priority and Heterogeneity")
```

```{r}
#| echo: false
#| include: false
# Step 1: Reshape the data
long_codes_melted <- long_codes %>%
  select(Code, Priority_Count, Heterogeneity_Count) %>%
  pivot_longer(cols = c(Priority_Count, Heterogeneity_Count), 
               names_to = "Type", 
               values_to = "Count") %>%
  filter(Count > 0)

```

```{r}
# Step 2: Create the bar chart
ggplot(long_codes_melted, aes(x = Code, y = Count, fill = Type)) +
  geom_bar(stat = "identity", position = "stack") +  # Create side-by-side bars for each 'Code'
  theme_minimal() + 
  coord_flip() +  # Flip coordinates for better readability
  labs(
    title = "Priority and Heterogeneity Counts",
    x = "Code",
    y = "Count",
    fill = "Type"
  ) +
  scale_fill_manual(values = c("Priority_Count" = "#330662",  
                              "Heterogeneity_Count" = "#3CBBB1")) + 
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1),  # Rotate x-axis labels
  )
```

## >= 3 P and >= 3H

The chart below visualizes the themes that have at least **3 priority** and **3 heterogeneous** codes applied.

```{r}
# Step 1: Pivot to wide format
df_wide <- long_codes_melted %>%
  pivot_wider(
    names_from = Type,
    values_from = Count,
    values_fill = 0
  )

# Step 2: Filter codes with both counts > 5
df_filtered <- df_wide %>%
  filter(Priority_Count >= 3, Heterogeneity_Count >= 3)

# Step 3: Create a bar plot (grouped)
df_long <- df_filtered %>%
  pivot_longer(cols = c(Priority_Count, Heterogeneity_Count),
               names_to = "Type",
               values_to = "Count")

ggplot(df_long, aes(x = reorder(Code, -Count), y = Count, fill = Type)) +
  geom_bar(stat = "identity", position = "dodge") +
  coord_flip() +
  labs(title = "Themes with >= 3 Priority and Heterogeneity Counts",
       x = "Code",
       y = "Count") +
  theme_minimal() +
  scale_fill_manual(values = c("Priority_Count" = "#330662",  
                              "Heterogeneity_Count" = "#3CBBB1")) 

```

# Code co-occurence
This chart visualizes codes that co-occur with others at least 5 times across analyzed transcripts. 
```{r}
#| echo: false
#| include: false

# Load packages
library(ggplot2)
library(reshape2)
library(dplyr)
library(RColorBrewer)
library(viridis)

# Read sheet
data <- read_excel('/Users/icey/Library/CloudStorage/Box-Box/Analysis/Downloaded data/Dedoose code co-occurence/2025-07-27.xlsx', sheet = 1)

# Convert to matrix format (assuming first column contains row names)
row_names <- data[[1]]
matrix_data <- as.matrix(data[, -1])
rownames(matrix_data) <- row_names

# Remove unwanted rows and columns in one go
matrix_data <- matrix_data[
  !rownames(matrix_data) %in% c("Totals", "Priority excerpt", "Heterogeniety"),
  !colnames(matrix_data) %in% c("Totals", "Priority excerpt", "Heterogeniety")
]

# Convert matrix to long format for ggplot
melted_data <- melt(matrix_data)
colnames(melted_data) <- c("Code1", "Code2", "Frequency")

# Filter to show only co-occurrences above 5
melted_data <- melted_data[melted_data$Frequency > 5, ]

# Basic heatmap
p1 <- ggplot(melted_data, aes(x = Code2, y = Code1, fill = Frequency)) +
  geom_tile(color = "white", size = 0.1) +
  scale_fill_viridis_c(name = "Co-occurrence\nFrequency", 
                       option = "plasma",
                       trans = "sqrt") +  # sqrt transformation for better visualization
  theme_minimal() +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1, size = 8),
    axis.text.y = element_text(size = 8),
    axis.title = element_blank(),
    plot.title = element_text(size = 14, hjust = 0.5),
    legend.position = "right"
  ) +
  labs(title = "Code Co-occurrence Heatmap (>5)")

```

```{r}
print(p1)
```

# Codebook

Our preliminary codebook is below. Over the coming weeks, we will refine this codebook, adding/adjusting definitions as we go.

```{r}
#| echo: false
#| include: false

#| echo: false
#| include: false
# Create a long version of the data where each row is a combination of Excerpt Copy and one Code
code_columns <- grep("^Code: ", colnames(excerpts), value = TRUE)
code_columns <- setdiff(code_columns, c("Code: Priority excerpt Applied", "Code: Heterogeniety Applied"))

# Reshape into long format: one row per Excerpt x Code
long_excerpts_flagged <- excerpts %>%
  select(`Excerpt Copy`, all_of(code_columns)) %>%
  pivot_longer(cols = all_of(code_columns), names_to = "Code", values_to = "Applied") %>%
  filter(Applied == "True") %>%
  mutate(
    Code = str_replace(Code, "^Code: ", ""),
    Code = str_replace(Code, " Applied$", ""),
    Priority = ifelse(`Excerpt Copy` %in% priority_excerpts, "Yes", "No"),
    Heterogeneity = ifelse(`Excerpt Copy` %in% hetero_excerpts, "Yes", "No")
  ) %>%
  select(Code, `Excerpt Copy`, Priority, Heterogeneity)

# Create dataframe with codes

codes_df <- data.frame(Code = sort(unique(long_excerpts_flagged$Code)))

# Extract sorted unique codes and create definitions column
codes_df <- data.frame(
  Code = sort(unique(long_excerpts_flagged$Code)),
  Definition = "",  # Start with empty definitions
  Example = ""
)
```

```{r}
# ADD/ADJUST definitions here

#| echo: false
#| include: false

# Add definitions and example excerpts for codes
codes_df$Definition[codes_df$Code == '"Suicide" comfort\\Directing Change'] <- "Participants express comfort with using the word suicide in relation to DC. If they mention discomfort or neutrality, code this along with Heterogeneity"
codes_df$Example[codes_df$Code == '"Suicide" comfort\\Directing Change'] <- "But I think that the program does a good job of showing suicide prevention in more of a pot -- not a positive way, but not so sad and something that you can talk about rather than, oh, that suicide, let's not touch on that subject. Like, it kind of brings light to the situation."

codes_df$Definition[codes_df$Code == '"Suicide" comfort\\General'] <- "Participants express comfort with using the word suicide without the influence of DC. If they mention discomfort or neutrality, code this along with Heterogeneity"
codes_df$Example[codes_df$Code == '"Suicide" comfort\\General'] <- "I feel it's a serious word that shouldn't be joked around with, like, saying, oh, I want to do this. I want to commit suicide... And then, when it comes to others around me, I think they're uncomfortable when it comes to it. Since I see people when the topic comes up about suicide, they just shy away or just ignored in general. Because they don't want to do the rabbit dives just right into it. They don't want to learn about it, but I feel that they just might not be fully comfortable with the word yet."

codes_df$Definition[codes_df$Code == "Changing the narrative"] <- "Refers to the specific importance of/efforts used to change the narrative around MH/S through film-making/viewing. Efforts to shift the conversation around mental health and suicide from trauma to hope and healing."
codes_df$Example[codes_df$Code == "Changing the narrative"] <-"I think whenever I talk about mental health or anything like that, a lot of people think about it as something really sad, but I always think about it as it can start off being as something really bad. But then it can turn into something good because it can change who you like are as a person for the better, and there's always hope in your life. There should always be hope. So I kind of took in a different direction...because I want people to know that there's always hope in their life, and that there's always hope to change."

codes_df$Definition[codes_df$Code == "Destigmatization"] <- "Efforts to reduce stigma and shame/negative stereotypes surrounding MH/S (thought-focused). This can be teacher or student-led and doesn't necessarily have to mention filmmaking or a change in behavior."
codes_df$Example[codes_df$Code == "Destigmatization"] <- "We're saying like, it's no longer like Oh, I have to go see her go to her office she's calling me. [Now] They're like, Oh, cause it's a really fun place to be, She's really fun to talk to. Maybe they'll get a snack, or they get like a fun toy. It's changed the perception of having to talk because I know in high school like when you had to talk and I had to talk to like a counselor or like go to a therapy appointment. Like that was so shameful like you don't want to tell people you're in therapy, or you have to talk to somebody because you're having a hard week, but now it's like the girls are very open about it, and really I like that change. Sometimes I'm hiding from them. That is because I need a break."

codes_df$Definition[codes_df$Code == "Emerging leader"] <- "This code captures individuals who, despite initial disinterest, reluctance or hesitation, take on leadership roles or become advocates for mental health or suicide prevention. It reflects a transformation in the participant’s self-perception and willingness to speak out or take action on important issues and is indicative of an emerging leader in this space."
codes_df$Example[codes_df$Code == "Emerging leader"] <- "She is definitely more of a quiet kid and you know you wouldn't. She's one of those like you wouldn't say `oh, this student absolutely made this film` kind of a thing and it was just really neat to watch the confidence that built within her of like putting the script together and getting her friends to help her, and then even getting her own little sister to participate in it, who is now a student here. So it was kind of fun to just see that interaction. And how like they, you know. She molded the whole thing together with getting people to do it with her and to just see her take charge of it. That's an aspect that we don't necessarily see often on campus just in her day to day, so that part was really fun."

codes_df$Definition[codes_df$Code == "Emotional impact of films"] <- "How a film affected their feelings or emotional state."
codes_df$Example[codes_df$Code == "Emotional impact of films"] <- "I think it was just the emotion behind it too. My friend and then her mom just started crying talking about everything that was going on. I think that just emotion really hit me and it just resonated with things I've gone through with my parents."

codes_df$Definition[codes_df$Code == "Empowerment"] <- "A sense of confidence, agency, or self-worth that enables individuals to express themselves, take action, or influence others. This includes feeling capable, valued, and motivated to use one's voice or experiences to support personal or collective growth."
codes_df$Example[codes_df$Code == "Empowerment"] <- "I have a neurodiverse, son, and so I already knew a lot about mental health and stuff. But the, I feel empowered to express my thoughts, emotions, and identity is really more what resonates with me because I'm important in his growth and I want to be important to these girls feeling that as well, feeling empowered."

codes_df$Definition[codes_df$Code == "Family involvement"] <- "Reflects how family members of participants of the DC program were involved by providing physical assistance, suggestions, etc. during the filmmaking process."
codes_df$Example[codes_df$Code == "Family involvement"] <- "My brother is also in the film class when we were making the films. He purchased him in the program too, but he didn't want to do the interview because he has a pretty busy schedule, so, he couldn't even find the time for it. So, he's the only family member that has really seen my films and that participated in it. Because first time I did it, I had him as my main actor for the for the PSA. So, I'm not sure how it affected him, but I feel it made him a bit more open about it since he was playing a pretty big part because he also made a film on his end. And he was playing a pretty big partner just setting up the story and doing the editing. So, I feel it impacted him a pretty good amount. Changed him a bit too. Like, it changed me."

codes_df$Definition[codes_df$Code == "Gateway to support\\Becoming a gateway"] <- "Reflects how participants, advisors, parents or community members act as confidantes or gateways, either by directly providing resources to others or by guiding peers toward support systems. This code highlights the importance of personal relationships and peer networks in connecting individuals with mental health resources or assistance."
codes_df$Example[codes_df$Code == "Gateway to support\\Becoming a gateway"] <- "I think Directing Change gave me the opportunity to be more like I guess bold and tell my school hey like we need resources, we need help. So I felt like before, like before we want anything, no one would listen but we won awards and we're being recognized, I feel like that's like when my school listened."

codes_df$Definition[codes_df$Code == "Gateway to support\\Being seen as a gateway"] <- "Reflects how participants are seen as confidantes or gateways, by providing resources to others or by guiding peers toward support systems. This code highlights the importance of personal relationships and peer networks in connecting individuals with mental health resources or assistance."
codes_df$Example[codes_df$Code == "Gateway to support\\Being seen as a gateway"] <- "I think someone shared it, like someone that went to a different school shared it and then a few months later, they told me that the video actually helped someone. It helps someone else from a different school, which I was like wow like that's awesome."

codes_df$Definition[codes_df$Code == "Healthy competition"] <- "The nature of DC allows for students to engage in healthy competiton during the film contest.This is a postitive experience that can highlight the efforts students put into their films and boost their self-esteem."
codes_df$Example[codes_df$Code == "Healthy competition"] <- "I think it helped with their self esteem because they see, we got a lot of good PSAs at this school. We're, you know, last year, I think was, I tried to pump them up and there was a little bit of lip service like, hey, the competition is here. You guys are all so capable and so good. This is where the competition is. And this year, I didn't have to say that because they saw how competitive it was just within the school. And it was cool to be able to see the younger students kind of comparing what they did to what the more advanced students did. And basically going like, wow. There like, there are some of them that they really thought were amazing. They're going, wow, that one was amazing. That one was amazing. But not saying the reaction wasn't mine sucked and theirs is amazing. The reaction was like, I made a really good one too.  Like, here's my competition, but we're in that competition."

codes_df$Definition[codes_df$Code == "Helping others (Expressing love/empathy, etc)"] <- "Participation in Directing Change helps student’s express love/empathy/kindness to others."
codes_df$Example[codes_df$Code == "Helping others (Expressing love/empathy, etc)"] <- "I think I noticed it a lot in my group of my team. I think we all valued mental health in our own way and for different reasons, I think. But I think I've come to help them explore it more in a way that isn't seen of a community need. I think when people go to mental health things or clubs, or they're in search of help for themselves. And I think that the focus is you need to help yourself and everything, but I think being able to express your love for others in a way also helps. Like they were able to find love and also helping others in a community way too. And I think it also is evident in the people that we helped, too, when they were able to have that drive and purpose for others, it really showed in the people they were helping out, too."

codes_df$Definition[codes_df$Code == "Hope/Inspiration"] <- "Participants mention finding hope/inspiration (feeling motivated, uplifted, or driven to act positively) in films viewed or through the process of film-making. This may include being inspired by peers, stories, the filmmaking process, or the opportunity to advocate for mental health."
codes_df$Example[codes_df$Code == "Hope/Inspiration"] <- "And then, if one of your classmates told a story about how you've changed because of Directing Change, what do you think they'd say?] I think they'd say they were definitely inspired by the videos we made. And I think they would say that it moved them to maybe be a little bit more thoughtful about mental health, whether it be for themselves, or just thinking about how they treat others."

codes_df$Definition[codes_df$Code == "Identity\\Art/Hobbies"] <- "Participants represent their identity via an emoji/expression tied to their hobbies. This includes arts, sports, music, etc."
codes_df$Example[codes_df$Code == "Identity\\Art/Hobbies"] <- "The 1st one I picked was two little theater masks, like the classical ones. I've been doing theater since I was about 4 years old, so it's just a big part of my identity, being an actress in that way."

codes_df$Definition[codes_df$Code == "Identity\\Culture/ethnicity"] <- "Participant represents their identity via an emoji/expression tied to culture and/or ethnicity"
codes_df$Example[codes_df$Code == "Identity\\Culture/ethnicity"] <- "The Filipino flag, because I'm Filipino, and my family is from the Philippines."

codes_df$Definition[codes_df$Code == "Identity\\Religion"] <- "Participants represent their identity via an emoji/expression tied to faith/religion(s)"
codes_df$Example[codes_df$Code == "Identity\\Religion"] <- "For my first emoji, I put a cross. I'm Christian, and so that's my belief in Jesus and everything"

codes_df$Definition[codes_df$Code == "Identity\\Self in Relation to Others"] <- "Participants represent their identity via an emoji/expression expressing to their relationship with others."
codes_df$Example[codes_df$Code == "Identity\\Self in Relation to Others"] <- "And then also I put a family. I'm the eldest out of my siblings, and I have cousins who live with us. So it feels like I'm the eldest of five when I'm the eldest of three. And I think that really sums up how I grew up and everything and how I work. So those are the three."

codes_df$Definition[codes_df$Code == "Identity\\Sexual"] <- "Participants represent their identity via an emoji/expression tied to their sexual identity"
codes_df$Example[codes_df$Code == "Identity\\Sexual"] <- "Being trans and being a part of the LGBTQ community, it's obviously a huge part of who I am and it's definitely a lot of like who I find in my friendships as well like I surround myself with very similar people. And it's just being full of love, being surrounded by people who are like you and people you love and care for."

codes_df$Definition[codes_df$Code == "Identity\\Traits/Motivations"] <- "Participants represent their identity via an emoji/expression tied to personal traits/charecteristics or core motivations"
codes_df$Example[codes_df$Code == "Identity\\Traits/Motivations"] <- "So the 1st one is like the little hearts all around. Because for me, that emoji, kind of represents, like, I like feeling loved. I like feeling belong in an environment amongst people. I'm definitely more of a social person. But I do like feeling loved by people I like, I like real relationships, not fake ones, obviously."

codes_df$Definition[codes_df$Code == "Joy"] <- "Feeling capable, valued, and motivated to use one's voice or experiences to support personal or collective growth. Mentions of enjoyment, pleasure, or positive experiences associated with participation. This includes descriptions of activities as entertaining, engaging, or joyful."
codes_df$Example[codes_df$Code == "Joy"] <- "I would say that participating in the Directing Change was really fun. And me, I felt like I was helping to get a message out there to people who just need somebody to feel related to. I would say somebody should participate because, again, I just thought it was really fun. I've always enjoyed film, so from the start it was just something I wanted to be a part of."

codes_df$Definition[codes_df$Code == "Knowledge/Awareness"] <- "Participants mention increased awareness and understanding of suicide-related information and resources, including risk factors, warning signs, prevention strategies, and mental health."
codes_df$Example[codes_df$Code == "Knowledge/Awareness"] <- "The first one, the door where it says, I know who to go to slash where to find resources when needed. There's always a number at the end of the film that I know I can call if I really need it. I know where to go to when resources are needed. At the end of the video they posted a lot of numbers suicide hotlines and things like that. So I think, just awareness and things like that. I don't have the number memorized or anything. But I know, what to Google, like national line if need be. So I think that was helpful."

codes_df$Definition[codes_df$Code == "Long-term impact"] <- "Refers to the lasting effects of the program on participants’ attitudes, behaviors, relationships, or future plans. Captures the extent to which the DC program effects (on individuals, groups or community) lasts over time, past the duration of the program itself."
codes_df$Example[codes_df$Code == "Long-term impact"] <- "Long term effects, I think, not just students, but also staff really started to take into account, mental health alot. Right now we have a wellness center, which is just somewhere where we can talk to Miss Emma about anything that's going on in our lives or just somewhere to really --, it's just more of a safe space, I want to say. I've been there a few times, and I see how positively it has impacted a lot of students. A lot of the students that do go to her, they really adore her and all that she's done for us. I think through Directing Change and through her as well, we're able to really take time for ourselves and understand that it's okay to feel the way that we feel, and it should also be okay for us to find somebody to talk to these things about."

codes_df$Definition[codes_df$Code == "Long-term impact\\Influence on future aspirations"] <- "Participation in Directing Change influence future directions, such as college decisions and/or career aspirations"
codes_df$Example[codes_df$Code == "Long-term impact\\Influence on future aspirations"] <- "I think it reaffirmed my want to explore this in a career setting. I'm still trying to get into the nursing program, but it's also followed up with me wanting to go into public health and everything, and trying to advocate more of mental health within health care in general. And I think it's given me a bigger purpose in what I want to do for a career."

codes_df$Definition[codes_df$Code == "Negative consequences"] <- "Participation in Directing Change influence future directions, such as college decisions and/or career aspirations"
codes_df$Example[codes_df$Code == "Negative consequences"] <- "I think one thing that helped me kind of learn about myself is, think about my own mental health, and really just learn about myself. Kind of consider, my behavior towards others from watching their videos, like, Oh, I should be kinder, I should like be more thoughtful when I say something like that."

codes_df$Definition[codes_df$Code == "One-word DC"] <- "Code specific to the question at the end of protocol asked about one-word to describe DC. One word to describe the experience of Directing Change or the impact of students in school participating."
codes_df$Example[codes_df$Code == "One-word DC"] <- "One was just impact. I think that these videos have and this program has a great impact. I think the girls who participate directly are very impacted in the sense that they get to learn about it, and they talk about it. And they really try to figure out, how can they help everybody else and make an impact in the whole student body's lives. And for that moment. And so I think that they take on a lot of responsibility, and they really want to do very well with that."

codes_df$Definition[codes_df$Code == "Opening conversations"] <- "Participation in the program/viewing the films creates opportunities for conversations that potentially wouldn’t have happened otherwise"
codes_df$Example[codes_df$Code == "Opening conversations"] <- "This program has helped us kind of spread this information in the regular day to day topics of the school. Obviously we don't talk about it every day, but it kind of opens the door to it, just being part of the school culture and things we talk about things that we find important, not just something we say, Oh, [give it] a check. We do this once, and check."	

codes_df$Definition[codes_df$Code == "Program implementation\\Barrier"] <- "Captures how schools 
Face challenges/barriers to the implementation of the DC program."
codes_df$Example[codes_df$Code == "Program implementation\\Barrier"] <- "if we don't have students that are kind of in that class or we don't run that class or whatever I think that's been the challenge. Then getting students to come, do that [Directing Change] for our school as another extracurricular activity. Because our kiddos take 7 classes all 4 years they're here. And then the majority of them are involved in some kind of sport or theater, you know, and so getting them to do that outside of school. I think was a challenge last school year, if I remember correctly. But so because they're also busy so that aspect has been challenging"	

codes_df$Definition[codes_df$Code == "Program implementation\\Acceptability/Feasibility"] <- "Captures how schools support the implementation of the DC program. This includes reflections on the accessibility, feasibility, and overall fit of the program within the school setting. This includes whether the students/staff like the program or not, how willing they are to participate, and the extent to which they integrate it into their school culture and daily routines. It also considers school infrastructure, staff capacity, and alignment with existing priorities and routines."
codes_df$Example[codes_df$Code == "Program implementation\\Acceptability/Feasibility"] <- "Well, some of it is based off of student involvement because we've mostly done it through our video production class…I think some of it is just like a technical aspect on our school, making sure that we have, like the opportunity to show the videos. And then, how do we make sure that we have everybody see it? Or how do we plan that kind of event? So we've worked that out. In the last couple of years, we actually just pre schedule. It's like a day that is on the calendar. So that part's no longer really an issue. As we figured it out that was kind of a challenge. But otherwise it's just kind of little things. You know, planning wise. But in general I think it's gone pretty well."

codes_df$Definition[codes_df$Code == "Program implementation\\Other"] <- "Captures how school plays a role in other supporting MH/S programs (NOT Directing Change program)."
codes_df$Example[codes_df$Code == "Program implementation\\Other"] <- "Yeah. Well, we start up. Our freshmen all take a health and wellness class. So that starts their freshman year, and they do different units on overall wellness. But then they spend some time specifically on mental wellness. And then I get to go in there and spend some time with them in that class, specifically talking about mental health, how our brain works."

codes_df$Definition[codes_df$Code == "Program implementation\\Recommendation"] <- "Areas Directing Change could support schools/adapt programming to improve program quality"
codes_df$Example[codes_df$Code == "Program implementation\\Recommendation"] <- "I think some of it is just like a technical aspect on our school, making sure that we have, like the opportunity to show the videos. And then, how do we make sure that we have everybody see it? Or how do we plan that kind of event? So we've worked that out. In the last couple of years, we actually just pre schedule. It's like a day that is on the calendar. So that part's no longer really an issue. As we figured it out that was kind of a challenge. But otherwise it's just kind of little things. You know, planning wise. But in general I think it's gone pretty well."	

codes_df$Definition[codes_df$Code == "Program implementation\\Unique value/opportunity from DC"] <- "Refers to unique opportunities provided through the DC program including having participants/audiences see films at premiers/judging contests, seeing familiar faces due to film exposure, students deciding different filmmaking roles based on personality types, youth-centered (action oriented) opportunities, chances for students to bring the program to school, etc."
codes_df$Example[codes_df$Code == "Program implementation\\Unique value/opportunity from DC"] <- "Participant I don't remember what film it was, but I remember feeling super inspired by the films that we were able to watch during the premiere and everything. And then I was like, How did we get in this place? Because they didn't just give a beautiful scene of how they are able to picture it, but also the meaning behind it and how inspiring it all was in general."

codes_df$Definition[codes_df$Code == "Ripple impact"] <- "The impact of Directing Change on non-participants, including nonfocal students and school staff"
codes_df$Example[codes_df$Code == "Ripple impact"] <- "I think Faculty is aware, I think that they are a lot more aware. I just noticed a difference from last year as opposed to this year, it may be because I'm not, just trying to keep my head above water. But it I just feel that they're a lot more aware and we talk about individual students. I know that teachers will come to me, or I'll go to them and say, Hey, I know you have this student. Do you notice that this has been going on? So I just think that everybody's just a little bit more aware of the mental health of the students."

codes_df$Definition[codes_df$Code == "Ripple impact\\Ripple impact - what"] <- "Referring to what topics or areas the ripples of the DC program touched on."
codes_df$Example[codes_df$Code == "Ripple impact\\Ripple impact - what"] <- "I did notice how people were inspired and they wanted to contribute the following year. I don't know how they are right now, but I remember when we released it, they were asking, like, Oh, this is really cool. Can we do it this time? Or is there opportunity we can also join in and everything?"

codes_df$Definition[codes_df$Code == "Ripple impact\\Ripple impact - who"] <- "Referring to who the ripples of the DC program impacted, which populations were touched"
codes_df$Example[codes_df$Code == "Ripple impact\\Ripple impact - who"] <- "Definitely, our school community is touched, especially as high school girls, I think there's a lot of like pressure, I think in today's society so definitely us, and maybe adults, too, like it'll help them realize that if they have kids or teens they can reach out and like recognize that sometimes they're missing out on something that's right in front of them, like if their child's having mental health struggles"

codes_df$Definition[codes_df$Code == "Ripple impact\\Ripple - missed"] <- "Who the ripple missed"
codes_df$Example[codes_df$Code == "Ripple impact\\Ripple - missed"] <- "I think maybe people who don't really think it's important or who don't really care enough to think of the bigger aspect of things. I feel like people who just stay to themselves and to their friends who don't really think about everything else that's going on or could affect somebody else, if that makes."	

codes_df$Definition[codes_df$Code == "Salience\\Personal development"] <- "Mentions of changes in beliefs/attitudes towards addressing issues of MH/S, personal development, growth and/or hope."
codes_df$Example[codes_df$Code == "Salience\\Personal development"] <- "I learned a lot about myself and where I was still kind of soft and needed to grow a little bit. And not only did it sharpen my filmmaking skills, because it has to be something that you're proud of and."	
		
codes_df$Definition[codes_df$Code == "Salience\\Relevance"] <- "Captures the significance participants attribute to mental health and suicide prevention, both as societal issues and personal priorities. This includes expressions of deep emotional investment, urgency, or moral conviction, as well as individual commitments to advocacy, education, or supporting others."
codes_df$Example[codes_df$Code == "Salience\\Relevance"] <- "I had a friend who was struggling with like an eating disorder, our junior year, like Sophomore and Junior Year, and I would say that the message in the film was really similar to what I experienced having a friend like struggling with that in real life it was like really similar and relatable. So it kind of like, I don't know. It helped, I think me and my other friends kind of like we were able to talk about it more and like come up with like a plan about what we were gonna do to help our friend but it was just like we saw what our situation in like the film. And so, yeah."	
	
codes_df$Definition[codes_df$Code == "School climate"] <- "[Parent Code] The broader climate (feeling/ethos within school) of the school surrounding mental health/suicide."
codes_df$Example[codes_df$Code == "School climate"] <- "Some of it is also ingrained in our school culture from one of our biggest school traditions. I don't know if you've ever heard. If anybody's ever talked about our red and gold tradition. It's a competition. This is SS-RA-01's baby, but they create a show based off of a theme, and the whole school participates in it. So they basically write a musical. So they're kind of also used to having to stretch themselves and do something. So [what] they have to do for red and gold, different categories like dance or drama. And everybody has to participate. So it's not just your theater kids, your cheerleaders and dancers. It's every single student. So they get pushed that way in general around here. But I think it's just the culture of our school, of trying to create the safe environment where we want you to push your limits."	

codes_df$Definition[codes_df$Code == "School climate\\Combined DC + other initiatives"] <- "Mentions of the impact(s) of DC alongside other MH/S initiatives."
codes_df$Example[codes_df$Code == "School climate\\Combined DC + other initiatives"] <- "But I also think whether the work with you guys [DC Program], but also just in general, in society, mental health, talking about mental health has become less stigmatized. And so I think we definitely embraced that, because you know it's always been like, Oh, well, girls are emotional, but not really any more than anybody else. It just might seem high end when they're just if they're crying. But that doesn't mean that's not a normal emotion. I think we got to embrace that and say, Okay, like, how do we talk about this? Because I think that's really healthy. And I think the girls, to SS-RA-04's point. We're saying like, it's no longer like Oh, I have to go see her go to her office she's calling me. [Now] They're like, Oh, cause it's a really fun place to be, She's really fun to talk to. Maybe they'll get a snack, or they get like a fun toy. It's changed the perception of having to talk because I know in high school like when you had to talk and I had to talk to like a counselor or like go to a therapy appointment. Like that was so shameful like you don't want to tell people you're in therapy, or you have to talk to somebody because you're having a hard week, but now it's like the girls are very open about it, and really I like that change. Sometimes I'm hiding from them. That is because I need a break."

codes_df$Definition[codes_df$Code == "School climate\\Other MH initiatives"] <- "Mentions of other mental health and/or suicide prevention initiatives, apart from Directing Change. This may include the impact of these programs."
codes_df$Example[codes_df$Code == "School climate\\Other MH initiatives"] <- "I would say. It's more teacher motivated like NS-RA-08 and I are in a class called PAL, which is Peer, Assistance, Leadership, and we kind of like that class is also focused on mental health, I guess. But it's more of the students in the class are like we host like fundraisers and like stuff like that to raise awareness for mental health, I guess. But it's kind of like the teachers, like the photography yearbook teacher that leads the class that makes the videos. And then our PAL teacher, they're really like good about like taking initiative to implement stuff like the mental health days, yeah, it's like teachers. NS-RA-08: And definitely the counselors, too. They facilitate a lot of the mental health activities and programs. And they kind of like are a reminder that we need to focus on our mental health. Like one of our counselors, she has a therapy dog that she brings around school, and we get to pet her. And it's like, really fun. But yeah, definitely, the counselors and teachers."

codes_df$Definition[codes_df$Code == "School climate\\Role of School in Supporting MH/S"] <- "Reflects participants’ views on the school’s collective responsibility to support students’ holistic development—including academics, social-emotional growth, and mental health. Emphasizes schools as environments committed to student well-being through resources, relationships, and support systems."
codes_df$Example[codes_df$Code == "School climate\\Role of School in Supporting MH/S"] <- "I think overall, they did a really good job, especially, I think the staff that we had to work with, and I know they advocate for mental health within our curriculums anyway. I feel like our school's very mental health-focused and driven as well. They have a lot of resources, whether that be some fun, normal, general activities to relieve stress in the counseling room or the library. And overall, pamphlets in general, I think. They do a really good job. And as well as the teachers and everything, I think they've always advocated for stress or anti-stress or overall relief in anything being there. All the teachers I've been close to and everything, they've always offered a hand or whatever they do."

codes_df$Definition[codes_df$Code == "Self-care"] <- "Describes participants' efforts/intentions to maintain or improve their mental health and emotional wellbeing through intentional practices. This includes setting boundaries, seeking rest, engaging in activities that bring joy or relief, or taking steps to prioritize their own needs."
codes_df$Example[codes_df$Code == "Self-care"] <- "One of the animated videos was more like, a `how to` like keep up good mental health, ,ot as much like, I know we talked about the one that was like a scenario, but one of them was just kind of like things you can do to like improve your mental health, which I think that was probably helpful, like seeing like, oh, if you eat a good breakfast every day, or something like that, like little daily changes in your life that you could implement that will make your mental health improve."	
	
codes_df$Definition[codes_df$Code == "Self-esteem"] <- "Refers to participants’ growing sense of self-worth, confidence, or belief in their abilities. This includes feeling more capable, valued, or empowered to take initiative, speak up, or seek support."
codes_df$Example[codes_df$Code == "Self-esteem"] <- "I think I just gathered confidence being able to reach out to others, like being able to reach out to, not only just here but our schools counseling program."	

codes_df$Definition[codes_df$Code == "Self-expression\\Identities"] <- "Refers to how filmmaking or viewing the films can provide a platform for participants to explore and express ethnic, religious, sexuality, gender, socioeconomic status identities that might otherwise remain unspoken within schools."
codes_df$Example[codes_df$Code == "Self-expression\\Identities"] <- "One of my friends made a film, and it was for the category through the lens of culture. And as a girl who has Hispanic parents, it made me feel heard. And it just made me feel understood too, that people are going through the same things that we go through due to our certain culture and certain mindsets that some of our parents have. So it just helped me feel a little bit better that I'm not alone in that."

codes_df$Definition[codes_df$Code == "Self-expression\\Interests/personality/emotions"] <- "Refers to how filmmaking or viewing the films can provide a platform for participants or viewers to explore and express their emotions, interests, personality characteristics/traits, and address topics that might otherwise remain unspoken within schools."
codes_df$Example[codes_df$Code == "Self-expression\\Interests/personality/emotions"] <- "Music has always been like a big part of my life. I've been playing piano since I was really young, and I just think it's just a way to express yourself that doesn't require words. And I really like, I love that about music and stuff, and especially doing it, for, like the direct change, like music, can literally tell you a million words in just like one little like piano piece, or like just a song in general."

codes_df$Definition[codes_df$Code == "Self-expression\\Mental health"] <- "Refers to how filmmaking or viewing the films can provide a platform for participants or viewers to explore and express their feelings and experiences with mental health, while addressing topics that might otherwise remain unspoken within schools."
codes_df$Example[codes_df$Code == "Self-expression\\Mental health"] <- "It was going through how a person would notice it. And so I looked back on previous experiences that I had myself and I wrote the script for it to really capture the way, one, a person would feel like they're alone and how another person who experienced it beforehand can really see that person the way nobody else really can."

codes_df$Definition[codes_df$Code == "Self-expression\\Other"] <- "Refers to how filmmaking or viewing the films can provide a platform for participants or viewers to explore and express any other part of their identity that is not explicitly mentioned."
codes_df$Example[codes_df$Code == "Self-expression\\Other"] <- "I think because of Directing Change, it gave me the chance to use a voice that I've kept hidden for a long time. So I think it's been really just a great opportunity for me to show myself through film."

codes_df$Definition[codes_df$Code == "Self: Help-Seeking"] <- "Participant mentions that are comfortable seeking out help for themselves or have experienced reaching out for support in a time of need."
codes_df$Example[codes_df$Code ==  "Self: Help-Seeking"] <- "I think I just gathered confidence being able to reach out to others, like being able to reach out to, not only just here but our schools counseling program. I know some girls, I think, one of them put in their video the names of the counselors, and the room it was at school, so you can see stuff like that. So that was helpful."

codes_df$Definition[codes_df$Code == "Sense of Belonging\\Self"] <- "Participant expresses that they do not feel alone, without necessarily referencing an active connection with others"
codes_df$Example[codes_df$Code ==  "Sense of Belonging\\Self"] <- "I'd say that I didn't like, when I feel sad, I don't like to tell anyone like, but now I think it's okay like, kind of talk about it a little, because it helps you feel like less alone in it, I think, and just having people people around to support you, and just like help you feel better."

codes_df$Definition[codes_df$Code == "Sense of Belonging\\Others"] <- "Participant mentions others do not feel alone, without necessarily referencing an active connection."
codes_df$Example[codes_df$Code ==  "Sense of Belonging\\Others"] <- "I think one or two people told me that they've related to the film I've made. Where you could feel just isolated or your friends not understanding you at first until they realize that there's actually something going on."

codes_df$Definition[codes_df$Code == "Sense of Connectedness\\Family"] <- "Participants express feeling closer to their family members due to the DC program."
codes_df$Example[codes_df$Code == "Sense of Connectedness\\Family"] <- "I've been able to talk to my mom more when it comes to like really understanding where she comes from with a lot of things and helping her out with her own personal problems. I feel like the program helped me grow in the sense of. I'm truly able to look at other people's problems and help them with what they're going through like even adults like my mom."

codes_df$Definition[codes_df$Code == "Sense of Connectedness\\Peers"] <- "Participant expresses feeling connected or closer to their peers. This code can include references of collaboration/teamwork."
codes_df$Example[codes_df$Code == "Sense of Connectedness\\Peers"] <- " I feel like most people in my school may have gone through the same issues as me, or if not, something probably worse. And I feel like now that we're directing change, at least in the film class, we made films about it. I feel we could be a bit more open about it, and we could connect and help out one another."

codes_df$Definition[codes_df$Code == "Sense of Connectedness\\Staff"] <- "Participant expresses feeling closer to school staff."
codes_df$Example[codes_df$Code == "Sense of Connectedness\\Staff"] <- "I know some students here such as myself, because I consider one of the teachers like a second mom basically. I feel I was able to talk to her pretty well and I was able to talk to her about what was happening in my life."

codes_df$Definition[codes_df$Code == "Sense of Connectedness\\School/community"] <- "Participant expresses feeling closer to members in the school community. This includes peers, school staff or braoder community members such as counselors or parents."
codes_df$Example[codes_df$Code == "Sense of Connectedness\\School/community"] <- "I think, it had a very positive impact on our school, not just with the students, but also the staff, the teachers. Last year was the first year we had done Directing Change, and there were a lot of obstacles with it, I want to say. But in the end, I feel that we had all become very supportive of each other. And prior to that, I didn't really get the chance to see that. So seeing how we all really became such a close community, almost like a family because of Directing Change, it was really amazing to see that happen."

codes_df$Definition[codes_df$Code == "Shift in MH/S norms"] <- "Captures shifts in MH/S norms (behavior) in the wider community. This includes a perspective change and new openness (on a large/broad scale) to discourse about MH/S due to participating in the program/viewing the films."
codes_df$Example[codes_df$Code == "Shift in MH/S norms"] <- "[Do you think that there was a change in the way that students and teachers or adult staff have communicated after Directing Change has been implemented?] Well, if anything, it is made it a tradition. Do you know what I mean rather than just something we use to fill a hole, when we don't have something for a flex period, something people look forward to? Maybe that's because the teachers are seeing other things that I can't see, especially because we're in the position where we have religion teachers where they can just stop a class, and, talk about whatever is affecting people and things like that. So that kind of stuff I'm not always aware about. But I am aware that now they expect these events, and they ask us, oh, when you gonna have the videos done, or we're thinking about doing this thing, how do you guys want to participate? So I think in that way, the faculty among us who create these kind of events. It's kind of looped in the Arts department a little bit more, and that's been very rewarding."	

codes_df$Definition[codes_df$Code == "Staff: Help-seeking for Others\\Helping students/other staff"] <- "Participant mentions assisting a student or other staff member in need of mental health support.This means either reaching out to a struggling student or staff member or just being a open source of contact to those who need it."
codes_df$Example[codes_df$Code == "Staff: Help-seeking for Others\\Helping students/other staff"] <- "I think that just one moment, like my new teacher, I saw someone go up to her and then they were talking. I think she was just being open, being a support. And we were talking about how the video is very personal to her. So I think, being able to have those conversations with adults."

codes_df$Definition[codes_df$Code == "Staff: Help-seeking for Others\\Readiness to help"] <- "Increased willingness of school staff to support students who may be struggling with mental health challenges"
codes_df$Example[codes_df$Code == "Staff: Help-seeking for Others\\Readiness to help"] <- "I think that after we watched the videos, there's been more of an effort on like our teachers parts to make like access to like suicide prevention things more or like make them more accessible, like we have like hotlines posted like everywhere, and they're on like the back of our IDs that we have to wear when we're on campus and it's just talked about a lot more than I think it was,like our freshman sophomore year."	

codes_df$Definition[codes_df$Code == "Student: Help-seeking for Others\\Encouraged Peer to Seek Help"] <- "Participants mention encouarging peers to seek help."
codes_df$Example[codes_df$Code == "Student: Help-seeking for Others\\Encouraged Peer to Seek Help"] <- "I think someone shared it, like someone that went to a different school shared it and then a few months later, they told me that the video actually helped someone. It helps someone else from a different school, which I was like wow like that's awesome."

codes_df$Definition[codes_df$Code == "Student: Help-seeking for Others\\Raised Question/Listened"] <- "Participants mention raising a question/listening/engaging in behaviors that open spaces for sensitive conversations."
codes_df$Example[codes_df$Code == "Student: Help-seeking for Others\\Raised Question/Listened"] <- "I was able to actually help other people because of what I learned through Directing Change, and I was able to check in with people because of what I learned from this program."

codes_df$Definition[codes_df$Code == "Student: Help-seeking for Others\\Readiness: Raise Question/Listen"] <- "Participant’s readiness to ask sensitive questions about suicide, probe for more information, and listen actively to the peer's responses."
codes_df$Example[codes_df$Code == "Student: Help-seeking for Others\\Readiness: Raise Question/Listen"] <- "It's been really wonderful because it has not only made me feel more comfortable talking about these things and given me the language to use to properly articulate my experiences and others experiences as well. Because other people see me doing these things, people feel comfortable coming to me asking me: I'm going through this thing, do you know any resources that I can go to? So that's been really good and that it's like opening a door for other people who might not know other people to go to."

codes_df$Definition[codes_df$Code == "Student: Help-seeking for Others\\Readiness: Take Action on behalf of peer"] <- "Participants express a willingness of themselves/another student to take action on behalf of a peer."
codes_df$Example[codes_df$Code == "Student: Help-seeking for Others\\Readiness: Take Action on behalf of peer"] <- "So, if anything's happened you see the difference in them. So, you realize something's wrong. And then if they need further help, and then we can ask grown ups or adults to help further to solve their solutions or having a bigger trustworthy adult to help them."
                 
codes_df$Definition[codes_df$Code == "Student: Help-seeking for Others\\Took Action on behalf of peer"] <- "Participants mention themselves/a student taking action on behalf of a peer."
codes_df$Example[codes_df$Code == "Student: Help-seeking for Others\\Took Action on behalf of peer"] <- "I know in the cases where I've had students come to me about people they're concerned about. A lot of times they're not students of mine at all. So, they’ll say, my friends...it's not a student, that is in any of my classes. Oftentimes they are as well, so I get a mix. But I know that the students that I interact with are seeking support for themselves and certainly for their friends. Many times, those friends are not people that I know at all."

codes_df$Definition[codes_df$Code == "Suicide loss"] <- "Participants mention experiencing either losing someone to suicide or feeling the impacts of when someone commits suicide."
codes_df$Example[codes_df$Code == "Suicide loss"] <- "It's really important to discuss it personally, because one of my friends, her friend committed suicide right near my house. So, I didn't know her. I only met her once or twice, but I just know it's really important that we talk about it and it's also important to talk about I don't  without saying what ways to do it, because a lot of people are just always I don't know TVs and movies have normalized it in a little in a way. This is a new way to hurt yourself kind of thing. So, it's really important to talk about and have a mature discussion about it, because it is so prominent especially amongst my generation. It's probably the highest numbers ever. So, it's just really important to talk about and so my friends and I we talk about it very comfortably, because we know we can share with each other. So, I think also part of it is having a good group of people that you trust a lot so that you can talk about it in a mature environment."

codes_df$Definition[codes_df$Code == "Unsure"] <- "General code if something feels important but doesn’t fit anywhere in the codebook."
codes_df$Example[codes_df$Code == "Unsure"] <- "my second emoji is a government building because it's kinda like what I study, and it's definitely -- a lot of my conversations are just about government and our current governmental administration and the history of just governance in general. So I definitely see that shaping my identity because I just read so much about it."	

codes_df$Definition[codes_df$Code == "Vigilance"] <- "An increased awareness of others' mental health wellbeing and attention to signs of struggle."
codes_df$Example[codes_df$Code == "Vigilance"] <- "Putting my radar up. That's a good way of putting it for me. Just last week a student came to me and said, may I go see my counselor? Sure go. And in the back of my head I'm like, Oh, great! She's gonna miss the whole assignment, and she's kind of flaky anyway. I let her go and then when she came back to class, I noticed she didn't have a pass from the counselor she had a pass from the nurse, and she had been gone for a long time. And it was right before lunch. So I said, just stay for a minute, and I'll explain to you what we're doing. So I explained the thing, and then I went and found the nurse and said, I noticed that that the student came to see you is everything Okay? And she said, yeah, she's having friend drama and she was just feeling a bit emotional. And I was like, okay, good. Good. So the radar is up a little bit more."	
		
codes_df$Definition[codes_df$Code == "Vulnerable students\\Family troubles"] <- "Participants mention those struggling with family troubles as particularly vulnerable to mental health challenges and/or how helpful Directing Change can be for these students."
codes_df$Example[codes_df$Code == "Vulnerable students\\Family troubles"] <- "I'd say I have a lot of friends. Well, not a lot, but like some friends, their parents aren't together so definitely that, not having, like a mom and a dad at home. That might be a little difficult for them, and maybe just like pressure from their parents overall that can definitely lead to one's mental health declining, and sometimes being a little more like insecure, I think, which is not like a bad thing, but I think it definitely affects their mental health when they have a lot going on, like a lot of responsibilities."

codes_df$Definition[codes_df$Code == "Vulnerable students\\Culture/ethnicity"] <- "Participants mention how cultural/ethnicity related identities may make students particularly vulnerable to mental health challenges and/or how helpful Directing Change can be for these students."
codes_df$Example[codes_df$Code == "Vulnerable students\\Culture/ethnicity"] <- "I think for me, it's like growing up in a brown household, it's like you, we all share these same experiences. It is really hard to talk about mental health and it's kind of nonexistent in the house. So it's like you do really have to stick through it and it's like I feel like it taught us a lot. For me, especially, it's like I got to learn a lot about mental health and how to handle my own mental health things. And it's, it really, like for my siblings, it's like when they got to hear about it, it was always something they kinda joked about, but they saw the movie and they're like, oh, wow. This is something serious. This is something bigger than all of us. And it kind of helped us create a closer bond. It's like we're able to have open serious conversations about these things now because it's like, oh, this is a real thing. And it was able through Directing Change and doing a creative format, it was like, I was able to bring it into our life and  make it a normal thing like mental health matters and it is here."

codes_df$Definition[codes_df$Code == "Vulnerable students\\Mental health challenges"] <- "Participants mention those struggling with other MH challenges as particularly vulnerable to how helpful Directing Change can be for these students."
codes_df$Example[codes_df$Code == "Vulnerable students\\Mental health challenges"] <- "I think it was last year, my junior year. They showed a film, and one of my friends was watching it with us, and she started tearing up because she was going through stuff mentally. And I think it just really hit her that there was people going through stuff too. And it could just be really overwhelming sometimes, so I think that just brought up emotions for her."

codes_df$Definition[codes_df$Code == "Vulnerable students\\Other"] <- "Participants mention those struggling with other troubles (immigrant/first-gen experiences, community, etc.) as particularly vulnerable to mental health challenges and/or how helpful Directing Change can be for these students."
codes_df$Example[codes_df$Code == "Vulnerable students\\Other"] <- "I think over time, it's actually opened up more, a realization that parents, it's also their first time living too, and I think that's sometimes hard to remember that you can sometimes hold a lot of mental health issues that can be affected because of your family and everything. I think there was a film that we watched too at the premiere, and I forgot what it was about. But I remember being, maybe I should be more open to my family, too, and everything about it. Because I'm a first-gen, so my parents are immigrants. So I think it's hard to communicate and have them understand it, too. I remember, so I've been more vulnerable with things going on and everything recently, too. It's still a work in progress."

codes_df$Definition[codes_df$Code == "Vulnerable students\\Religion"] <- "Participants mention how religious identities may make students particularly vulnerable to mental health challenges and/or how helpful Directing Change can be for these students."
codes_df$Example[codes_df$Code == "Vulnerable students\\Religion"] <- "I have this one friend who has a very strict Catholic mom, and they're also bi, but their parents don't know that. So I think that plays into their mental health a lot, because sometimes it's really hard being in a religious family when you don't believe everything that they believe. So I think that can take a toll on your mental health a lot, and that's what's happening to them."

codes_df$Definition[codes_df$Code == "Vulnerable students\\Gender/Sexual identity"] <- "Participants mention non-heteronormative sexual identities may make students particularly vulnerable to mental health challenges and/or how helpful Directing Change can be for these students."
codes_df$Example[codes_df$Code == "Vulnerable students\\Gender/Sexual identity"] <- "I know mental health always is a little bit more difficult for people I know that are Lgbtq community, or some people that are more racially discriminated against. I personally have friends I know, that have already been affected by that, so I do think they're vulnerable, yes. [And why do you think they are more vulnerable?] I think again, because when you have that identity, it might inspire some isolation, and being lonely, of course is never good for your mental health and feeling rejected, it lowers your self esteem. I think that's what makes it vulnerable."	
```

```{r}
# Display codebook
codes_df %>%
  kable("html", escape = FALSE) %>%
  kable_styling(full_width = FALSE) %>%
  column_spec(3, width = "30em")  # assuming 'Examples' is the 3rd column
```

```{r}
#| echo: false
#| include: false

# After every update of the codebook, save the file as an Excel sheet in our Box drive with a timestamp
codes_df_2025_05_18 <- write.xlsx(codes_df, "/Users/abishankar/Library/CloudStorage/Box-Box/Directing Change: Qualitative interviews (Spring 2025)/Data/Analysis/Codebooks/codebook_2025-05-18.xlsx")
```

# Excerpt viewer

The table below allows you filter through all coded excerpts. In the **code** column, you may select a code from the dropdown. Using the **P?** and **H?** dropdowns, you can filter specifically for the ones coded priority and/or heterogeneous.

```{r}
# Create an interactive table
datatable(
  long_excerpts_flagged,
  escape = FALSE,
  filter = "top",
  options = list(
    pageLength = 10,
    autoWidth = FALSE,  # Disable autoWidth to respect columnDefs widths
    columnDefs = list( # Adjust this in CSS file!
      list(width = '50px', targets = 0),   # Code
      list(width = '200px', targets = 1),  # Excerpt — much wider for wrapping
      list(width = '100px', targets = 2),  # Priority
      list(width = '100px', targets = 3)   # Heterogeneity
    ),
    initComplete = JS(
      "function(settings, json) {",
      "  this.api().columns().every(function() {",
      "    var column = this;",
      "    var select = $('<select><option value=\"\"></option></select>')",
      "      .css('margin-top', '5px')",
      "      .appendTo($(column.header()))",
      "      .on('change', function() {",
      "        var val = $.fn.dataTable.util.escapeRegex($(this).val());",
      "        column.search(val ? '^' + val + '$' : '', true, false).draw();",
      "      });",
      "    column.data().unique().sort().each(function(d, j) {",
      "      select.append('<option value=\"' + d + '\">' + d + '</option>');",
      "    });",
      "  });",
      "}"
    ),
    headerCallback = JS('function(thead, data, start, end, display) {
        $(thead).find("th").css("background-color", "#330662").css("color", "white");
    }')
  ),
  rownames = FALSE,
  colnames = c("Code", "Excerpt", "P?", "H?")
) %>%
  formatStyle(
    'Code',
    whiteSpace = 'nowrap'
  ) %>%
  formatStyle(
    'Excerpt Copy',
    whiteSpace = 'normal',
    wordBreak = 'break-word'
  ) %>%
  formatStyle(
    'Priority',
    whiteSpace = 'nowrap'
  ) %>%
  formatStyle(
    'Heterogeneity',
    whiteSpace = 'nowrap'
  )
```

