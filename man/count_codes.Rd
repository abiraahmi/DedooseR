% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/count_codes.R
\name{count_codes}
\alias{count_codes}
\title{Count code applications across excerpts}
\usage{
count_codes(
  excerpts,
  min_count = 1,
  output_type = c("tibble", "kable", "datatable")
)
}
\arguments{
\item{excerpts}{A data frame containing at least a \code{media_title} column and
one or more logical columns (assumed to represent codes). Each row should
represent a coded excerpt.}

\item{min_count}{An integer specifying the minimum number of occurrences
required for a code to be included in the output. Defaults to \code{1}.}

\item{output_type}{Character string specifying the output format. Must be one of:
\itemize{
\item \code{"tibble"}: returns a tibble (default).
\item \code{"kable"}: returns a formatted table via \code{knitr::kable()}.
\item \code{"datatable"}: returns an interactive table via \code{DT::datatable()}.
}}
}
\value{
A summary of code counts in the format specified by \code{output_type}.
By default, a tibble with the following columns:
\describe{
\item{code}{The name of the code (column name).}
\item{count}{Total number of excerpts where the code was applied.}
\item{n_media_titles}{Number of unique \code{media_title}s containing at least one excerpt with the code.}
}
}
\description{
This function summarizes the frequency of applied codes (logical columns)
across a dataset of excerpts. It returns the total number of excerpts where
each code appears, as well as the number of unique \code{media_title}s in which
the code is applied. Results can be returned as a tibble, a formatted table
(\code{knitr::kable}), or an interactive table (\code{DT::datatable}).
}
\details{
The function automatically identifies code columns as those that are logical
(\code{TRUE}/\code{FALSE}) within the provided \code{excerpts} data frame. It reshapes the
data to long format, filters for \code{TRUE} values, and aggregates counts at the
code level.
}
\examples{
# Example dataset
df <- data.frame(
  media_title = c("Doc1", "Doc1", "Doc2", "Doc2", "Doc3"),
  c_theme1 = c(TRUE, FALSE, TRUE, FALSE, TRUE),
  c_theme2 = c(FALSE, TRUE, TRUE, TRUE, FALSE),
  c_theme3 = c(FALSE, FALSE, FALSE, TRUE, TRUE)
)

# Get code counts as a tibble
count_codes(df)

# Apply a minimum count filter (codes must appear in >= 2 excerpts)
count_codes(df, min_count = 2)

# Return results as a kable
if (requireNamespace("knitr", quietly = TRUE)) {
  count_codes(df, output_type = "kable")
}

# Return results as an interactive datatable
if (requireNamespace("DT", quietly = TRUE)) {
  count_codes(df, output_type = "datatable")
}

}
