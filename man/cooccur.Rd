% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cooccur.R
\name{cooccur}
\alias{cooccur}
\title{Generate a Code Co-Occurrence Matrix and Network Plot}
\usage{
cooccur(
  excerpts = NULL,
  coccur_matrix = NULL,
  min_bold = 10,
  output = c("kable", "tibble", "data.frame"),
  plot = TRUE,
  matrix_threshold = 5,
  plot_threshold = 0,
  layout = "circle",
  edge_color_low = "lightgray",
  edge_color_high = "purple",
  node_color = "lightblue"
)
}
\arguments{
\item{excerpts}{A data frame containing a \code{media_title} column and code columns (prefixed with \code{"c_"}).}

\item{coccur_matrix}{Optional. A pre-computed co-occurrence matrix (alternative to providing \code{excerpts}).}

\item{min_bold}{Integer. Minimum co-occurrence count for bolding cells in the \code{kable} output. Default = 10.}

\item{output}{Character. Output format for the matrix: \code{"kable"}, \code{"tibble"}, or \code{"data.frame"}. Default = \code{"kable"}.}

\item{plot}{Logical. Whether to produce a \code{ggraph} network plot. Default = \code{TRUE}.}

\item{matrix_threshold}{Integer. Minimum co-occurrence count required to retain a code pair. Default = 5.}

\item{plot_threshold}{Integer. Minimum code frequency (diagonal value) required for inclusion in the plot. Default = 0.}

\item{layout}{Character. Layout for \code{ggraph}. Options include \code{"circle"}, \code{"fr"}, \code{"kk"}, etc. Default = \code{"circle"}.}

\item{edge_color_low}{Character. Color for weakest edges. Default = \code{"lightgray"}.}

\item{edge_color_high}{Character. Color for strongest edges. Default = \code{"purple"}.}

\item{node_color}{Character. Color for nodes in the network. Default = \code{"lightblue"}.}
}
\value{
A named list with two elements:
\itemize{
\item \code{matrix} - A formatted co-occurrence matrix (as a \code{kable}, \code{tibble}, or \code{data.frame}).
\item \code{plot} - A \code{ggraph} network plot object (if \code{plot = TRUE}), or \code{NULL} otherwise.
}
}
\description{
This function computes a co-occurrence matrix of qualitative codes based on
transcript-level data (e.g., each transcript coded with multiple binary \code{c_} variables),
filters the matrix based on a minimum co-occurrence threshold, and optionally visualizes
the network of code co-occurrences using \code{ggraph}.
}
\details{
The function expects an input data frame (\code{excerpts}) that includes a column called
\code{media_title} identifying transcript or participant names, and one or more binary
code columns whose names start with \code{"c_"}. It aggregates codes at the transcript level
and computes a symmetric co-occurrence matrix using the cross-product of code columns.

Rows and columns with all zeros are dropped, and you can control how many co-occurrences
are required to be included in the matrix and plot using \code{matrix_threshold}.

If variable labels are attached (e.g., via \code{haven::labelled()}), these will automatically
be used for the node labels in the plot.
}
\examples{
\dontrun{
# Example data frame
library(dplyr)
excerpts <- data.frame(
  media_title = rep(c("A", "B", "C", "D"), each = 2),
  c_selfesteem = c(1,0,1,1,0,1,1,0),
  c_helpseeking = c(0,1,1,0,1,1,0,0),
  c_belonging = c(1,1,0,1,0,1,1,1)
)

# Compute and plot
co <- cooccur(
  excerpts = excerpts,
  matrix_threshold = 2,
  plot_threshold = 1,
  output = "kable"
)

# View formatted matrix
co$matrix

# Show network plot
co$plot
}

}
