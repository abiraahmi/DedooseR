% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/clean_data.R
\name{clean_data}
\alias{clean_data}
\title{Clean and prepare excerpt-level coding data}
\usage{
clean_data(excerpts, preferred_coders)
}
\arguments{
\item{excerpts}{A data frame containing raw excerpt-level coding data.
Must include at least the columns \code{media_title} and \code{excerpt_creator}.}

\item{preferred_coders}{A character vector of coder IDs in order of
preference (e.g., \code{c("a", "l", "i", "r")}).}
}
\value{
A cleaned data frame of excerpts with standardized columns, filtered
to the preferred coder, and with labeled variables. A codebook data frame
is also assigned to the global environment.
}
\description{
This function cleans a dataset of coded excerpts exported from Dedoose (or a
similar qualitative coding platform). It standardizes variable names,
converts code columns to logicals, filters to the preferred coder per
transcript, and assigns variable labels. A codebook is also generated and
saved to the global environment.
}
\details{
The cleaning steps performed are:
\enumerate{
\item Standardize all column names to lowercase and replace spaces with underscores.
\item Rename \code{excerpt_copy} to \code{excerpt} if present.
\item Drop columns ending in "range" or "weight".
\item Identify code columns (names starting with "code" and ending with "applied").
\item Convert code columns from text to logical (\code{TRUE} if "true", otherwise \code{FALSE}).
\item Clean and rename code column names by stripping prefixes/suffixes and
adding a \code{c_} prefix.
\item Save the final set of cleaned code column names for labeling.
\item Filter to the preferred coder for each \code{media_title}, based on the
order of \code{preferred_coders}.
\item Apply human-readable variable labels for common metadata fields and
all code columns.
\item Generate a codebook (variable, label, and type) and assign it to the
global environment as \code{codebook}.
}
}
\examples{
\dontrun{
# Example usage
raw_excerpts <- readxl::read_xlsx("inst/raw_data/test_data.xlsx")
preferred <- c("a", "l", "i", "r", "s")
cleaned <- clean_data(raw_excerpts, preferred)

# View the automatically created codebook
head(codebook)
}
}
